{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactAdmin = require(\"react-admin\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _SchemaAnalyzerContext = _interopRequireDefault(require(\"./SchemaAnalyzerContext\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nconst ResourcesIntrospecter = _ref => {\n  let {\n    component: Component,\n    schemaAnalyzer,\n    includeDeprecated,\n    resource,\n    resources,\n    loading,\n    error,\n    ...rest\n  } = _ref;\n\n  if (loading) {\n    return null;\n  }\n\n  if (error) {\n    if ('production' === process.env.NODE_ENV) {\n      console.error(error);\n    }\n\n    throw new Error('API schema is not readable');\n  }\n\n  if (resources == null) {\n    return null;\n  }\n\n  const schema = resources.find(r => r.name === resource);\n\n  if (!schema || !schema.fields || !schema.readableFields || !schema.writableFields) {\n    if ('production' === process.env.NODE_ENV) {\n      console.error(`Resource ${resource} not present inside API description`);\n    }\n\n    throw new Error(`Resource ${resource} not present inside API description`);\n  }\n\n  const fields = includeDeprecated ? schema.fields : schema.fields.filter(_ref2 => {\n    let {\n      deprecated\n    } = _ref2;\n    return !deprecated;\n  });\n  const readableFields = includeDeprecated ? schema.readableFields : schema.readableFields.filter(_ref3 => {\n    let {\n      deprecated\n    } = _ref3;\n    return !deprecated;\n  });\n  const writableFields = includeDeprecated ? schema.writableFields : schema.writableFields.filter(_ref4 => {\n    let {\n      deprecated\n    } = _ref4;\n    return !deprecated;\n  });\n  return /*#__PURE__*/_react.default.createElement(Component, _extends({\n    schemaAnalyzer: schemaAnalyzer,\n    resource: resource,\n    schema: schema,\n    fields: fields,\n    readableFields: readableFields,\n    writableFields: writableFields\n  }, rest));\n};\n\nconst Introspecter = _ref5 => {\n  let {\n    component,\n    includeDeprecated = false,\n    resource,\n    ...rest\n  } = _ref5;\n  const logoutIfAccessDenied = (0, _reactAdmin.useLogoutIfAccessDenied)();\n  const schemaAnalyzer = (0, _react.useContext)(_SchemaAnalyzerContext.default);\n  const schemaAnalyzerProxy = (0, _react.useMemo)(() => new Proxy(schemaAnalyzer, {\n    get: (target, key) => {\n      if (typeof target[key] !== 'function') {\n        return target[key];\n      }\n\n      return function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        const result = target[key].apply(target, args);\n\n        if (result && typeof result.then === 'function') {\n          return result.catch(e => {\n            logoutIfAccessDenied(e).then(loggedOut => {\n              if (loggedOut) {\n                return;\n              }\n\n              throw e;\n            });\n          });\n        }\n\n        return result;\n      };\n    }\n  }), [schemaAnalyzer, logoutIfAccessDenied]);\n  const {\n    resources\n  } = (0, _reactRedux.useSelector)(state => state.introspect['introspect'] ? state.introspect['introspect'].data : {});\n  const [loading, setLoading] = (0, _react.useState)(true);\n  const [error, setError] = (0, _react.useState)(null);\n  const dataProvider = (0, _reactAdmin.useDataProvider)();\n  (0, _react.useEffect)(() => {\n    if (resources) {\n      setLoading(false);\n      return;\n    }\n\n    dataProvider.introspect(resource, {}, {\n      action: 'INTROSPECT'\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  }, [dataProvider, resource, resources]);\n  return /*#__PURE__*/_react.default.createElement(ResourcesIntrospecter, _extends({\n    component: component,\n    schemaAnalyzer: schemaAnalyzerProxy,\n    includeDeprecated: includeDeprecated,\n    resource: resource,\n    resources: resources,\n    loading: loading,\n    error: error\n  }, rest));\n};\n\nIntrospecter.propTypes = {\n  component: _propTypes.default.elementType.isRequired,\n  resource: _propTypes.default.string.isRequired,\n  includeDeprecated: _propTypes.default.bool\n};\nvar _default = Introspecter;\nexports.default = _default;","map":{"version":3,"sources":["C:/newproject/bookshop-api/myadmin/node_modules/@api-platform/admin/lib/Introspecter.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_reactAdmin","_reactRedux","_SchemaAnalyzerContext","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","ResourcesIntrospecter","component","Component","schemaAnalyzer","includeDeprecated","resource","resources","loading","error","rest","process","env","NODE_ENV","console","Error","schema","find","r","name","fields","readableFields","writableFields","filter","deprecated","createElement","Introspecter","logoutIfAccessDenied","useLogoutIfAccessDenied","useContext","schemaAnalyzerProxy","useMemo","Proxy","args","result","then","catch","e","loggedOut","useSelector","state","introspect","data","setLoading","useState","setError","dataProvider","useDataProvider","useEffect","action","propTypes","elementType","isRequired","string","bool","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactAdmin = require(\"react-admin\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _SchemaAnalyzerContext = _interopRequireDefault(require(\"./SchemaAnalyzerContext\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nconst ResourcesIntrospecter = ({\n  component: Component,\n  schemaAnalyzer,\n  includeDeprecated,\n  resource,\n  resources,\n  loading,\n  error,\n  ...rest\n}) => {\n  if (loading) {\n    return null;\n  }\n\n  if (error) {\n    if ('production' === process.env.NODE_ENV) {\n      console.error(error);\n    }\n\n    throw new Error('API schema is not readable');\n  }\n\n  if (resources == null) {\n    return null;\n  }\n\n  const schema = resources.find(r => r.name === resource);\n\n  if (!schema || !schema.fields || !schema.readableFields || !schema.writableFields) {\n    if ('production' === process.env.NODE_ENV) {\n      console.error(`Resource ${resource} not present inside API description`);\n    }\n\n    throw new Error(`Resource ${resource} not present inside API description`);\n  }\n\n  const fields = includeDeprecated ? schema.fields : schema.fields.filter(({\n    deprecated\n  }) => !deprecated);\n  const readableFields = includeDeprecated ? schema.readableFields : schema.readableFields.filter(({\n    deprecated\n  }) => !deprecated);\n  const writableFields = includeDeprecated ? schema.writableFields : schema.writableFields.filter(({\n    deprecated\n  }) => !deprecated);\n  return /*#__PURE__*/_react.default.createElement(Component, _extends({\n    schemaAnalyzer: schemaAnalyzer,\n    resource: resource,\n    schema: schema,\n    fields: fields,\n    readableFields: readableFields,\n    writableFields: writableFields\n  }, rest));\n};\n\nconst Introspecter = ({\n  component,\n  includeDeprecated = false,\n  resource,\n  ...rest\n}) => {\n  const logoutIfAccessDenied = (0, _reactAdmin.useLogoutIfAccessDenied)();\n  const schemaAnalyzer = (0, _react.useContext)(_SchemaAnalyzerContext.default);\n  const schemaAnalyzerProxy = (0, _react.useMemo)(() => new Proxy(schemaAnalyzer, {\n    get: (target, key) => {\n      if (typeof target[key] !== 'function') {\n        return target[key];\n      }\n\n      return (...args) => {\n        const result = target[key].apply(target, args);\n\n        if (result && typeof result.then === 'function') {\n          return result.catch(e => {\n            logoutIfAccessDenied(e).then(loggedOut => {\n              if (loggedOut) {\n                return;\n              }\n\n              throw e;\n            });\n          });\n        }\n\n        return result;\n      };\n    }\n  }), [schemaAnalyzer, logoutIfAccessDenied]);\n  const {\n    resources\n  } = (0, _reactRedux.useSelector)(state => state.introspect['introspect'] ? state.introspect['introspect'].data : {});\n  const [loading, setLoading] = (0, _react.useState)(true);\n  const [error, setError] = (0, _react.useState)(null);\n  const dataProvider = (0, _reactAdmin.useDataProvider)();\n  (0, _react.useEffect)(() => {\n    if (resources) {\n      setLoading(false);\n      return;\n    }\n\n    dataProvider.introspect(resource, {}, {\n      action: 'INTROSPECT'\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  }, [dataProvider, resource, resources]);\n  return /*#__PURE__*/_react.default.createElement(ResourcesIntrospecter, _extends({\n    component: component,\n    schemaAnalyzer: schemaAnalyzerProxy,\n    includeDeprecated: includeDeprecated,\n    resource: resource,\n    resources: resources,\n    loading: loading,\n    error: error\n  }, rest));\n};\n\nIntrospecter.propTypes = {\n  component: _propTypes.default.elementType.isRequired,\n  resource: _propTypes.default.string.isRequired,\n  includeDeprecated: _propTypes.default.bool\n};\nvar _default = Introspecter;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}